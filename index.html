<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shekar Fitness Log</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --bg: #f8fafc; --card: #ffffff; --text: #0f172a; 
            --primary: #1e293b; --accent: #2563eb; --border: #e2e8f0; 
            --success: #10b981; --danger: #ef4444;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; overflow-x: hidden; }
        .container { padding: 15px; max-width: 500px; margin: 0 auto; padding-bottom: 100px; width: 100%; }
        
        /* Splash & Branding */
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 5000; transition: opacity 0.6s ease; }
        .logo-box { font-size: 60px; margin-bottom: 10px; text-align: center; }
        .pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        /* Profile Modal */
        #profile-modal { position: fixed; bottom: -100%; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 4600; transition: bottom 0.4s ease; display: flex; align-items: flex-end; }
        #profile-modal.active { bottom: 0; }
        .modal-content { background: white; width: 100%; max-width: 500px; margin: 0 auto; border-radius: 24px 24px 0 0; padding: 25px; box-shadow: 0 -10px 25px rgba(0,0,0,0.1); }
        
        /* Header */
        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .profile-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; cursor: pointer; border: 2px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

        /* Layout & UI */
        .card { background: var(--card); padding: 20px; border-radius: 16px; border: 1px solid var(--border); margin-bottom: 15px; }
        .charts-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .mini-chart-card { background: white; border-radius: 14px; padding: 8px; border: 1px solid var(--border); height: 100px; cursor: pointer; }
        .workout-box { font-size: 0.85rem; line-height: 1.6; background: #f1f5f9; padding: 12px; border-radius: 12px; white-space: pre-line; border-left: 4px solid var(--accent); }
        .hidden { display: none !important; }

        /* Nav */
        .nav { position: fixed; bottom: 0; width: 100%; max-width: 500px; background: white; display: flex; border-top: 1px solid var(--border); left: 50%; transform: translateX(-50%); z-index: 1000; height: 65px; align-items: center; }
        .nav-item { flex: 1; text-align: center; cursor: pointer; font-size: 0.7rem; font-weight: 800; color: #94a3b8; }
        .nav-item.active { color: var(--accent); }

        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid var(--border); border-radius: 10px; font-size: 1rem; }
        button { width: 100%; padding: 14px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="logo-box pulse">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
    <h2 style="color:white; font-weight:300; letter-spacing:4px; text-align: center;">SHEKAR<br>FITNESS LOG</h2>
</div>

<div id="profile-modal" onclick="toggleProfile(false)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0">Profile Settings</h3>
            <span onclick="toggleProfile(false)" style="font-size:1.5rem; cursor:pointer;">&times;</span>
        </div>
        <label style="font-size:0.8rem; color:#64748b; font-weight:700;">NAME</label>
        <input type="text" id="prof-name">
        <label style="font-size:0.8rem; color:#64748b; font-weight:700;">WEIGHT (KG)</label>
        <input type="number" id="prof-weight">
        <label style="font-size:0.8rem; color:#64748b; font-weight:700;">HEIGHT (CM)</label>
        <input type="number" id="prof-height">
        <button onclick="updateProfile()" style="background:var(--accent)">Save Changes</button>
        <button onclick="resetAll()" style="background:none; color:var(--danger); border:1px solid var(--danger); margin-top:10px;">Reset All Data</button>
    </div>
</div>

<div id="fullscreen-chart-view" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:4500; padding:20px; display:flex; flex-direction:column;" class="hidden">
    <div onclick="closeChart()" style="cursor:pointer; color:var(--accent); font-weight:700; margin-bottom:20px;">‚Üê BACK</div>
    <h2 id="full-chart-title">Trend</h2>
    <div style="flex:1; position:relative;"><canvas id="fullChartCanvas"></canvas></div>
</div>

<div class="container">
    <div id="setup-screen" class="card hidden" style="text-align:center; margin-top:15vh;">
        <div class="logo-box">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
        <h2>Setup Profile</h2>
        <input type="text" id="setup-name" placeholder="Full Name">
        <input type="number" id="setup-weight" placeholder="Weight (kg)">
        <input type="number" id="setup-height" placeholder="Height (cm)">
        <button onclick="saveInitialProfile()">Start My Log</button>
    </div>

    <div id="main-app" class="hidden">
        <div class="header-row">
            <div>
                <div id="day-header" style="color:var(--accent); font-weight:800; font-size:0.7rem; text-transform:uppercase;"></div>
                <h1 id="welcome-msg" style="margin:0; font-size:1.3rem;">Welcome</h1>
            </div>
            <div class="profile-btn" onclick="toggleProfile(true)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08s5.97 1.09 6 3.08c-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
            </div>
        </div>

        <div class="charts-row">
            <div class="mini-chart-card" onclick="zoomChart('weight')"><canvas id="miniWeightChart"></canvas></div>
            <div class="mini-chart-card" onclick="zoomChart('bmi')"><canvas id="miniBmiChart"></canvas></div>
        </div>

        <div id="home-view">
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <div id="target-header" style="display:flex; align-items:center; gap:8px; font-weight:800;"></div>
                    <span style="font-size:0.6rem; color:var(--accent); font-weight:800; border:1.5px solid var(--accent); padding:2px 6px; border-radius:4px; cursor:pointer;" onclick="toggleEdit()">EDIT</span>
                </div>
                <div id="workout-display" class="workout-box"></div>
                <div id="edit-area" class="hidden" style="margin-top:10px;">
                    <textarea id="custom-workout-input" rows="5" style="width:100%; border-radius:10px; border:1px solid var(--border); padding:10px;"></textarea>
                    <button style="background:var(--success)" onclick="saveCustomWorkout()">Update Schedule</button>
                </div>
            </div>

            <h3 style="margin:20px 0 10px 0; font-size:0.75rem; text-transform:uppercase; color:#64748b;">Daily Warm-up</h3>
            <div class="card" style="padding:12px; display:flex; gap:10px; flex-direction:column; background:none; border:none;">
                <div style="display:flex; align-items:center; padding:12px; background:white; border-radius:14px; border:1px solid var(--border); gap:10px; cursor:pointer;" onclick="alert('Routine: Hamstring, Quad, Neck, Shoulder stretches.')">üßò‚Äç‚ôÇÔ∏è Stretching</div>
                <div style="display:flex; align-items:center; padding:12px; background:white; border-radius:14px; border:1px solid var(--border); gap:10px; cursor:pointer;" onclick="alert('Routine: 30s Sprints, 20 Burpees, Jump Squats.')">‚ö° HIIT Cardio</div>
            </div>

            <button onclick="promptWeight()">‚öñÔ∏è Update Current Weight</button>
        </div>

        <div id="history-view" class="hidden">
            <h3>Weight History</h3>
            <div id="history-list"></div>
        </div>
    </div>
</div>

<div class="nav hidden" id="bottom-nav">
    <div class="nav-item active" id="nav-home" onclick="showView('home')">Log</div>
    <div class="nav-item" id="nav-logs" onclick="showView('history')">History</div>
</div>

<script>
    const schedule = {
        "Monday": {area: "Chest", icon: "ËÉ∏", plan: "‚Ä¢ Seated Machine Press (3x12)\n‚Ä¢ Pec Deck Fly (3x15)\n‚Ä¢ Incline Machine Press (3x12)\n‚Ä¢ Low-to-High Cable Fly (3x15)"},
        "Tuesday": {area: "Back", icon: "ËÉå", plan: "‚Ä¢ Lat Pulldown (Wide) (3x12)\n‚Ä¢ Seated Cable Row (3x12)\n‚Ä¢ Machine Assisted Pullups (3x10)\n‚Ä¢ Face Pulls (3x15)"},
        "Wednesday": {area: "Biceps", icon: "ËÖï", plan: "‚Ä¢ Seated DB Curls (3x12)\n‚Ä¢ Hammer Curls (3x12)\n‚Ä¢ EZ-Bar Preacher Curls (3x10)\n‚Ä¢ Cable Rope Curls (3x15)"},
        "Thursday": {area: "Triceps", icon: "ËÇò", plan: "‚Ä¢ Rope Pushdowns (3x15)\n‚Ä¢ Overhead Machine Ext (3x12)\n‚Ä¢ Bench Dips (3x12)\n‚Ä¢ Plank (3x45s)"},
        "Friday": {area: "Shoulders", icon: "ËÇ©", plan: "‚Ä¢ Seated Machine Press (3x12)\n‚Ä¢ Lateral Raises (3x15)\n‚Ä¢ Rear Delt Fly (3x12)\n‚Ä¢ DB Front Raises (3x12)"},
        "Saturday": {area: "Legs", icon: "ËÑö", plan: "‚Ä¢ Seated Leg Press (4x15)\n‚Ä¢ Leg Extensions (3x12)\n‚Ä¢ Seated Leg Curls (3x12)\n‚Ä¢ Wall Sits (3x30s)"},
        "Sunday": {area: "Rest", icon: "‰ºë", plan: "‚Ä¢ 20 min Recovery Walk\n‚Ä¢ Full Body Stretching\n‚Ä¢ Foam Rolling"}
    };

    let data = JSON.parse(localStorage.getItem('shekarAppData')) || null;
    let miniW, miniB, fullC;

    window.onload = () => {
        setTimeout(() => {
            document.getElementById('splash-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash-screen').style.display = 'none';
                if(!data) document.getElementById('setup-screen').classList.remove('hidden');
                else init();
            }, 600);
        }, 1200);
    };

    function init() {
        document.getElementById('setup-screen').classList.add('hidden');
        document.getElementById('main-app').classList.remove('hidden');
        document.getElementById('bottom-nav').classList.remove('hidden');
        
        const day = new Intl.DateTimeFormat('en-US', {weekday:'long'}).format(new Date());
        document.getElementById('day-header').innerText = new Date().toLocaleDateString('en-GB', {weekday:'long', day:'numeric', month:'short'});
        document.getElementById('welcome-msg').innerText = `Hello, ${data.name.split(' ')[0]}`;
        
        document.getElementById('target-header').innerHTML = `üéØ Target: <span style="color:var(--accent)">${schedule[day].area}</span>`;
        document.getElementById('workout-display').innerText = data.customPlans?.[day] || schedule[day].plan;
        
        renderCharts();
    }

    function toggleProfile(show) {
        const modal = document.getElementById('profile-modal');
        if(show) {
            document.getElementById('prof-name').value = data.name;
            document.getElementById('prof-weight').value = data.weight;
            document.getElementById('prof-height').value = data.height;
            modal.classList.add('active');
        } else {
            modal.classList.remove('active');
        }
    }

    function updateProfile() {
        data.name = document.getElementById('prof-name').value;
        data.weight = parseFloat(document.getElementById('prof-weight').value);
        data.height = parseFloat(document.getElementById('prof-height').value);
        localStorage.setItem('shekarAppData', JSON.stringify(data));
        init();
        toggleProfile(false);
    }

    function renderCharts() {
        const labels = data.history.map(h => h.date);
        const weights = data.history.map(h => h.val);
        const bmis = data.history.map(h => (h.val / ((data.height/100)**2)).toFixed(1));
        const cfg = { maintainAspectRatio: false, plugins: { legend: {display:false} }, scales: { x:{display:false}, y:{display:false} } };

        if(miniW) miniW.destroy(); if(miniB) miniB.destroy();
        miniW = new Chart(document.getElementById('miniWeightChart'), { type:'bar', data:{labels, datasets:[{data:weights, backgroundColor:'#2563eb'}]}, options:cfg });
        miniB = new Chart(document.getElementById('miniBmiChart'), { type:'line', data:{labels, datasets:[{data:bmis, borderColor:'#10b981', tension:0.4, pointRadius:0}]}, options:cfg });
    }

    function zoomChart(type) {
        document.getElementById('fullscreen-chart-view').classList.remove('hidden');
        const labels = data.history.map(h => h.date);
        const dataset = type === 'weight' ? 
            { label:'Weight (kg)', data:data.history.map(h => h.val), color:'#2563eb' } : 
            { label:'BMI', data:data.history.map(h => (h.val/((data.height/100)**2)).toFixed(1)), color:'#10b981' };
        
        if(fullC) fullC.destroy();
        fullC = new Chart(document.getElementById('fullChartCanvas'), { type: type==='weight'?'bar':'line', data:{labels, datasets:[{...dataset, borderColor:dataset.color, backgroundColor:dataset.color+'22', fill:true}]}, options:{maintainAspectRatio:false} });
    }

    function closeChart() { document.getElementById('fullscreen-chart-view').classList.add('hidden'); }
    function saveInitialProfile() {
        const w = parseFloat(document.getElementById('setup-weight').value);
        const h = parseFloat(document.getElementById('setup-height').value);
        const n = document.getElementById('setup-name').value;
        if(!n || !w || !h) return alert("Please fill all fields");
        data = { name:n, weight:w, height:h, history:[{date:new Date().toLocaleDateString('en-GB',{day:'numeric',month:'short'}), val:w}], customPlans:{} };
        localStorage.setItem('shekarAppData', JSON.stringify(data)); init();
    }
    function promptWeight() {
        const nw = prompt("Update Weight (kg):");
        if(nw && !isNaN(nw)) {
            data.weight = parseFloat(nw);
            data.history.push({ date: new Date().toLocaleDateString('en-GB', {day:'numeric', month:'short'}), val: parseFloat(nw) });
            if(data.history.length > 8) data.history.shift();
            localStorage.setItem('shekarAppData', JSON.stringify(data));
            renderCharts();
        }
    }
    function toggleEdit() { document.getElementById('edit-area').classList.toggle('hidden'); }
    function saveCustomWorkout() {
        const day = new Intl.DateTimeFormat('en-US', {weekday:'long'}).format(new Date());
        data.customPlans[day] = document.getElementById('custom-workout-input').value;
        localStorage.setItem('shekarAppData', JSON.stringify(data));
        init(); toggleEdit();
    }
    function showView(v) {
        document.getElementById('home-view').classList.toggle('hidden', v!=='home');
        document.getElementById('history-view').classList.toggle('hidden', v!=='history');
        document.getElementById('nav-home').classList.toggle('active', v==='home');
        document.getElementById('nav-logs').classList.toggle('active', v==='history');
        if(v==='history') document.getElementById('history-list').innerHTML = data.history.map(h => `<div style="padding:12px; border-bottom:1px solid var(--border)"><b>${h.date}</b>: ${h.val}kg</div>`).reverse().join('');
    }
    function resetAll() { if(confirm("Erase all data?")) { localStorage.clear(); location.reload(); } }
</script>
</body>
</html>
